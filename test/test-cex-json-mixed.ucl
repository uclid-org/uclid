module main {
	var	PC	:	bv16;
	var	ACC	:	bv8;
	var	B	:	bv8;
	var	PSW	:	bv8;
	var	SP	:	bv8;
	var	DPL	:	bv8;
	var	DPH	:	bv8;
	var	P0	:	bv8;
	var	P1	:	bv8;
	var	P2	:	bv8;
	var	P3	:	bv8;
	var	PCON	:	bv8;
	var	TCON	:	bv8;
	var	TMOD	:	bv8;
	var	TL0	:	bv8;
	var	TH0	:	bv8;
	var	TL1	:	bv8;
	var	TH1	:	bv8;
	var	SCON	:	bv8;
	var	SBUF	:	bv8;
	var	IE	:	bv8;
	var	IP	:	bv8;
	var	XRAM_DATA_OUT	:	bv8;
	var	XRAM_ADDR	:	bv16;
	var	ROM	:	[bv16]bv8;
	var	IRAM	:	[bv8]bv8;
    var steps   : integer;
	type states_t = enum { pc_0_stack_, pc_6_stack_, pc_9_stack_ };
	var current_state	:	states_t;
    init {
        PC	= 0bv16;
        ACC	= 0bv8;
        B	= 0bv8;
        PSW	= 0bv8;
        SP	= 0bv8;
        DPL	= 0bv8;
        DPH	= 0bv8;
        P0	= 0bv8;
        P1	= 0bv8;
        P2	= 0bv8;
        P3	= 0bv8;
        PCON	= 0bv8;
        TCON	= 0bv8;
        TMOD	= 0bv8;
        TL0	= 0bv8;
        TH0	= 0bv8;
        TL1	= 0bv8;
        TH1	= 0bv8;
        SCON	= 0bv8;
        SBUF	= 0bv8;
        IE	= 0bv8;
        IP	= 0bv8;
        XRAM_DATA_OUT	= 0bv8;
        XRAM_ADDR	= 0bv16;
        ROM = const(0bv8, [bv16]bv8);
        ROM[0bv16]	= 2bv8;
        ROM[1bv16]	= 0bv8;
        ROM[2bv16]	= 6bv8;
        ROM[3bv16]	= 2bv8;
        ROM[4bv16]	= 0bv8;
        ROM[5bv16]	= 136bv8;
        ROM[6bv16]	= 117bv8;
        ROM[7bv16]	= 129bv8;
        ROM[8bv16]	= 29bv8;
        ROM[9bv16]	= 18bv8;
        ROM[10bv16]	= 0bv8;
        ROM[11bv16]	= 146bv8;
        ROM[12bv16]	= 229bv8;
        ROM[13bv16]	= 130bv8;
        ROM[14bv16]	= 96bv8;
        ROM[15bv16]	= 3bv8;
        ROM[16bv16]	= 2bv8;
        ROM[17bv16]	= 0bv8;
        ROM[18bv16]	= 3bv8;
        ROM[19bv16]	= 121bv8;
        ROM[20bv16]	= 0bv8;
        ROM[21bv16]	= 233bv8;
        ROM[22bv16]	= 68bv8;
        ROM[23bv16]	= 0bv8;
        ROM[24bv16]	= 96bv8;
        ROM[25bv16]	= 27bv8;
        ROM[26bv16]	= 122bv8;
        ROM[27bv16]	= 0bv8;
        ROM[28bv16]	= 144bv8;
        ROM[29bv16]	= 0bv8;
        ROM[30bv16]	= 150bv8;
        ROM[31bv16]	= 120bv8;
        ROM[32bv16]	= 1bv8;
        ROM[33bv16]	= 117bv8;
        ROM[34bv16]	= 160bv8;
        ROM[35bv16]	= 0bv8;
        ROM[36bv16]	= 228bv8;
        ROM[37bv16]	= 147bv8;
        ROM[38bv16]	= 242bv8;
        ROM[39bv16]	= 163bv8;
        ROM[40bv16]	= 8bv8;
        ROM[41bv16]	= 184bv8;
        ROM[42bv16]	= 0bv8;
        ROM[43bv16]	= 2bv8;
        ROM[44bv16]	= 5bv8;
        ROM[45bv16]	= 160bv8;
        ROM[46bv16]	= 217bv8;
        ROM[47bv16]	= 244bv8;
        ROM[48bv16]	= 218bv8;
        ROM[49bv16]	= 242bv8;
        ROM[50bv16]	= 117bv8;
        ROM[51bv16]	= 160bv8;
        ROM[52bv16]	= 255bv8;
        ROM[53bv16]	= 228bv8;
        ROM[54bv16]	= 120bv8;
        ROM[55bv16]	= 255bv8;
        ROM[56bv16]	= 246bv8;
        ROM[57bv16]	= 216bv8;
        ROM[58bv16]	= 253bv8;
        ROM[59bv16]	= 120bv8;
        ROM[60bv16]	= 0bv8;
        ROM[61bv16]	= 232bv8;
        ROM[62bv16]	= 68bv8;
        ROM[63bv16]	= 0bv8;
        ROM[64bv16]	= 96bv8;
        ROM[65bv16]	= 10bv8;
        ROM[66bv16]	= 121bv8;
        ROM[67bv16]	= 1bv8;
        ROM[68bv16]	= 117bv8;
        ROM[69bv16]	= 160bv8;
        ROM[70bv16]	= 0bv8;
        ROM[71bv16]	= 228bv8;
        ROM[72bv16]	= 243bv8;
        ROM[73bv16]	= 9bv8;
        ROM[74bv16]	= 216bv8;
        ROM[75bv16]	= 252bv8;
        ROM[76bv16]	= 120bv8;
        ROM[77bv16]	= 0bv8;
        ROM[78bv16]	= 232bv8;
        ROM[79bv16]	= 68bv8;
        ROM[80bv16]	= 0bv8;
        ROM[81bv16]	= 96bv8;
        ROM[82bv16]	= 12bv8;
        ROM[83bv16]	= 121bv8;
        ROM[84bv16]	= 0bv8;
        ROM[85bv16]	= 144bv8;
        ROM[86bv16]	= 0bv8;
        ROM[87bv16]	= 1bv8;
        ROM[88bv16]	= 228bv8;
        ROM[89bv16]	= 240bv8;
        ROM[90bv16]	= 163bv8;
        ROM[91bv16]	= 216bv8;
        ROM[92bv16]	= 252bv8;
        ROM[93bv16]	= 217bv8;
        ROM[94bv16]	= 250bv8;
        ROM[95bv16]	= 2bv8;
        ROM[96bv16]	= 0bv8;
        ROM[97bv16]	= 3bv8;
        ROM[98bv16]	= 117bv8;
        ROM[99bv16]	= 176bv8;
        ROM[100bv16]	= 222bv8;
        ROM[101bv16]	= 117bv8;
        ROM[102bv16]	= 160bv8;
        ROM[103bv16]	= 222bv8;
        ROM[104bv16]	= 117bv8;
        ROM[105bv16]	= 144bv8;
        ROM[106bv16]	= 222bv8;
        ROM[107bv16]	= 117bv8;
        ROM[108bv16]	= 128bv8;
        ROM[109bv16]	= 222bv8;
        ROM[110bv16]	= 117bv8;
        ROM[111bv16]	= 176bv8;
        ROM[112bv16]	= 173bv8;
        ROM[113bv16]	= 117bv8;
        ROM[114bv16]	= 160bv8;
        ROM[115bv16]	= 173bv8;
        ROM[116bv16]	= 117bv8;
        ROM[117bv16]	= 144bv8;
        ROM[118bv16]	= 173bv8;
        ROM[119bv16]	= 117bv8;
        ROM[120bv16]	= 128bv8;
        ROM[121bv16]	= 173bv8;
        ROM[122bv16]	= 117bv8;
        ROM[123bv16]	= 176bv8;
        ROM[124bv16]	= 0bv8;
        ROM[125bv16]	= 117bv8;
        ROM[126bv16]	= 160bv8;
        ROM[127bv16]	= 0bv8;
        ROM[128bv16]	= 117bv8;
        ROM[129bv16]	= 144bv8;
        ROM[130bv16]	= 0bv8;
        ROM[131bv16]	= 117bv8;
        ROM[132bv16]	= 128bv8;
        ROM[133bv16]	= 0bv8;
        ROM[134bv16]	= 128bv8;
        ROM[135bv16]	= 254bv8;
        ROM[136bv16]	= 229bv8;
        ROM[137bv16]	= 28bv8;
        ROM[138bv16]	= 112bv8;
        ROM[139bv16]	= 3bv8;
        ROM[140bv16]	= 133bv8;
        ROM[141bv16]	= 29bv8;
        ROM[142bv16]	= 128bv8;
        ROM[143bv16]	= 2bv8;
        ROM[144bv16]	= 0bv8;
        ROM[145bv16]	= 98bv8;
        ROM[146bv16]	= 117bv8;
        ROM[147bv16]	= 130bv8;
        ROM[148bv16]	= 0bv8;
        ROM[149bv16]	= 34bv8;
        current_state	= pc_0_stack_;
        steps = 0;
    }
    next {
        steps' = steps + 1;
        assert (ROM[0bv16] != 0bv8);
    }

    //property p0_not_zero: (P0 == 0bv8);
    property steps_3: steps != 3;
    control {
        v = unroll(3);
        check;
        print_results;
        v.print_cex_json(PC, steps, current_state);
    }
}
